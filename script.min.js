var ColorPalettesRange = require("@chiarapassaro/color-palettes-range/src/js");

$(document).ready(function () {
    var $canvas = $('#canvas');
    var template = $('.template-bubble .bubble__container');
    var numberBubbles = getRandom(2,20);
    var widthCanvas = $canvas.width();
    var heightCanvas = $canvas.height();
    var coordinates = [];
    var color = 'red';

    for (var i = 0; i < numberBubbles; i++){
        var $bubbleContainer = template.clone();
        var $bubble = $bubbleContainer.children('.bubble');

        var sizeContainer = getRandom(5,300);
        var sizeBubble = getRandom(2,sizeContainer);

        $bubbleContainer.width(sizeContainer);
        $bubbleContainer.height(sizeContainer);
        $bubble.css('background-color', color);

        $bubble.width(sizeBubble);
        $bubble.height(sizeBubble);

        //devo controllare che i valori non esistano gia'

        do{
            var top = getRandom(1,heightCanvas);
            var left = getRandom(1,widthCanvas);
        } while(coordinates.includes([top,left]));

        coordinates.push([top, left]);
        $bubbleContainer.offset({ top: top, left: left});

        //creo altre bolle dentro il container
        var numberSubBubble = getRandom(2,100);

        for (var j = 0; j < numberSubBubble; j++) {
            var newBubble = template.children('.bubble').clone();
            var newBubbleSize = getRandom(10,200);
            var widthContainer = $bubble.width();
            var heightContainer = $bubble.height();

            newBubble.width(newBubbleSize);
            newBubble.height(newBubbleSize);
            var blur = getRandom(30, 100);
            newBubble.css('box-shadow', '0 0 ' + blur +'px ' + color);
            newBubble.css('background-color', color);

            newBubble.offset({ top: getRandom(0,heightContainer - newBubbleSize), left: getRandom(0,widthContainer -newBubbleSize) });

            $bubble.append(newBubble);
        }

        $canvas.append($bubbleContainer);
    }
});